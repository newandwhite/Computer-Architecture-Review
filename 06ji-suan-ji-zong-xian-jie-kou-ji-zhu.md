# 06 计算机总线接口技术
### 总线概述
* 总线规范（层级）：**机械层、电气层、协议层、架构层**

### 总线分类
* 按照**数据传递方向**：
    * 单向总线（单工总线）
    * 双向总线（双工总线）
* 按照**总线使用的信号类型**：
    * 并行总线（多位传输线，带宽更大，但需要保证多位数据在同一时刻到达，因此对总线宽度与频率有限制）
    * 串行总线（一位传输线）
> 当前趋势：串行取代并行（主频高，占用芯片引脚少）

* 按照**总线在计算机中所处的物理位置**：
    * 片上总线（芯片片内互联使用的总线）
    * 系统总线（通常用于处理器与桥片的连接，同时也作为多处理器之间的连接以构成多路系统）
    * 内存总线（用于连接处理器和主存储器）
    * 设备总线（用于计算机系统中与IO设备的连接）
* 其他分类：
    * 共享/点对点
    * 全局时钟/源同步

### 总线举例
* 片上总线：AXI（高级可扩展接口）
    * 高性能、高带宽、低延迟的片上总线，地址/控制和数据总线是分离的，支持不对齐数据传输，突发传输中只需要发送首地址，使用分离读写通道，支持乱序访问
    * 主要分为5个独立通道，每个通道采用握手协议独立传输：**写请求、写数据、写响应、读请求、读响应**
    * AXI协议：
    
        单向通道体系结构
        支持多项数据交换
        独立的地址和数据通道
        * AXI架构：主从协议，使用双向握手协议
        * 互联架构：多个主设备和从设备之间使用互联总线进行连接
        * 高频设计
        * 读写事务顺序：支持乱序完成
        * 分离读写地址通道
* 内存总线：DDR3
    * 并行总线，共享设备连接，全局时钟
    * DRAM存储单元是按照Bank、行、列来组织的，因此对DRAM的寻址是通过Bank地址、行地址和列地址来进行的。此外，计算机系统中可以将多组DRAM串接在一起，不同组之间通过片选（CS）信号来区分
* 系统总线：HT（略）
* IO总线：PCIE（PCI总线的升级版本）
    * 串行总线，点对点设备连接，源同步（时钟与数据混编）
    * 总线传输同样以包（事务层报TLP）为单位，主要分为TLP首部与数据负载两部分。4字节单位增长
    * 可由多个数据通道组成
    * 仅发送数据信号，不发送时钟信号